<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>casacore: casacore::LockFile Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">casacore
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacecasacore.html">casacore</a></li><li class="navelem"><a class="el" href="classcasacore_1_1LockFile.html">LockFile</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classcasacore_1_1LockFile-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">casacore::LockFile Class Reference<div class="ingroups"><a class="el" href="group__IO__module.html">IO_module</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Class to handle file locking and synchronization.  
 <a href="classcasacore_1_1LockFile.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="LockFile_8h_source.html">LockFile.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac63535ebfa8f7c031ff78a90e4afc9fb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#ac63535ebfa8f7c031ff78a90e4afc9fb">LockFile</a> (const <a class="el" href="classcasacore_1_1String.html">String</a> &amp;fileName, double inspectInterval=0, <a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a> create=<a class="el" href="namespacecasacore.html#a11ef6530f2dc946f54d220fe416bfd41">False</a>, <a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a> addToRequestList=<a class="el" href="namespacecasacore.html#ad5c850f9e177173e0f7d0ad57091501d">True</a>, <a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a> mustExist=<a class="el" href="namespacecasacore.html#ad5c850f9e177173e0f7d0ad57091501d">True</a>, <a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a> seqnr=0, <a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a> permLocking=<a class="el" href="namespacecasacore.html#a11ef6530f2dc946f54d220fe416bfd41">False</a>, <a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a> noLocking=<a class="el" href="namespacecasacore.html#a11ef6530f2dc946f54d220fe416bfd41">False</a>)</td></tr>
<tr class="memdesc:ac63535ebfa8f7c031ff78a90e4afc9fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create or open the lock file with the given name.  <a href="#ac63535ebfa8f7c031ff78a90e4afc9fb">More...</a><br/></td></tr>
<tr class="separator:ac63535ebfa8f7c031ff78a90e4afc9fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b7cc28e0dcf5fa6997516e1a830dd35"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#a9b7cc28e0dcf5fa6997516e1a830dd35">~LockFile</a> ()</td></tr>
<tr class="memdesc:a9b7cc28e0dcf5fa6997516e1a830dd35"><td class="mdescLeft">&#160;</td><td class="mdescRight">The destructor does not delete the file, because it is not known when the last process using the lock file will stop.  <a href="#a9b7cc28e0dcf5fa6997516e1a830dd35">More...</a><br/></td></tr>
<tr class="separator:a9b7cc28e0dcf5fa6997516e1a830dd35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a225490ec6805037883a32f9c9b59feda"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#a225490ec6805037883a32f9c9b59feda">isMultiUsed</a> ()</td></tr>
<tr class="memdesc:a225490ec6805037883a32f9c9b59feda"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is the file associated with the <a class="el" href="classcasacore_1_1LockFile.html" title="Class to handle file locking and synchronization. ">LockFile</a> object in use in another process?  <a href="#a225490ec6805037883a32f9c9b59feda">More...</a><br/></td></tr>
<tr class="separator:a225490ec6805037883a32f9c9b59feda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae701eaa69deba9293db0a5b223a1cedb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#ae701eaa69deba9293db0a5b223a1cedb">acquire</a> (<a class="el" href="classcasacore_1_1FileLocker.html#a88e00f7a9d5ca67f0aa9c55d0da57601">FileLocker::LockType</a>=<a class="el" href="classcasacore_1_1FileLocker.html#a88e00f7a9d5ca67f0aa9c55d0da57601ac3d6c1b5bfa673e8b3ea66751a95922b">FileLocker::Write</a>, <a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a> nattempts=0)</td></tr>
<tr class="memdesc:ae701eaa69deba9293db0a5b223a1cedb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Acquire a read or write lock.  <a href="#ae701eaa69deba9293db0a5b223a1cedb">More...</a><br/></td></tr>
<tr class="separator:ae701eaa69deba9293db0a5b223a1cedb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a737fc9f3cf91347e8bf285eeaf60ad84"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#a737fc9f3cf91347e8bf285eeaf60ad84">acquire</a> (<a class="el" href="classcasacore_1_1MemoryIO.html">MemoryIO</a> &amp;info, <a class="el" href="classcasacore_1_1FileLocker.html#a88e00f7a9d5ca67f0aa9c55d0da57601">FileLocker::LockType</a>=<a class="el" href="classcasacore_1_1FileLocker.html#a88e00f7a9d5ca67f0aa9c55d0da57601ac3d6c1b5bfa673e8b3ea66751a95922b">FileLocker::Write</a>, <a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a> nattempts=0)</td></tr>
<tr class="separator:a737fc9f3cf91347e8bf285eeaf60ad84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbf0df08cb056fcc3a3828c54bf94d8e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#acbf0df08cb056fcc3a3828c54bf94d8e">acquire</a> (<a class="el" href="classcasacore_1_1MemoryIO.html">MemoryIO</a> *info, <a class="el" href="classcasacore_1_1FileLocker.html#a88e00f7a9d5ca67f0aa9c55d0da57601">FileLocker::LockType</a> type, <a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a> nattempts)</td></tr>
<tr class="separator:acbf0df08cb056fcc3a3828c54bf94d8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b4fc54de384f42bc897fb71e2572ada"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#a5b4fc54de384f42bc897fb71e2572ada">release</a> ()</td></tr>
<tr class="memdesc:a5b4fc54de384f42bc897fb71e2572ada"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release a lock and write the information (if given) into the lock file.  <a href="#a5b4fc54de384f42bc897fb71e2572ada">More...</a><br/></td></tr>
<tr class="separator:a5b4fc54de384f42bc897fb71e2572ada"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f716b20c413b34d101c861a5072e8de"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#a7f716b20c413b34d101c861a5072e8de">release</a> (const <a class="el" href="classcasacore_1_1MemoryIO.html">MemoryIO</a> &amp;info)</td></tr>
<tr class="separator:a7f716b20c413b34d101c861a5072e8de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedd581c76e683a3684eadeb0022a0395"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#aedd581c76e683a3684eadeb0022a0395">release</a> (const <a class="el" href="classcasacore_1_1MemoryIO.html">MemoryIO</a> *info)</td></tr>
<tr class="separator:aedd581c76e683a3684eadeb0022a0395"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d807b35d0f1e43f6f085753bb59a56a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#a6d807b35d0f1e43f6f085753bb59a56a">inspect</a> (<a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a> always=<a class="el" href="namespacecasacore.html#a11ef6530f2dc946f54d220fe416bfd41">False</a>)</td></tr>
<tr class="memdesc:a6d807b35d0f1e43f6f085753bb59a56a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inspect if another process wants to access the file (i.e.  <a href="#a6d807b35d0f1e43f6f085753bb59a56a">More...</a><br/></td></tr>
<tr class="separator:a6d807b35d0f1e43f6f085753bb59a56a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bab2073fd8293e72b3b02d9c3af7c62"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#a6bab2073fd8293e72b3b02d9c3af7c62">canLock</a> (<a class="el" href="classcasacore_1_1FileLocker.html#a88e00f7a9d5ca67f0aa9c55d0da57601">FileLocker::LockType</a>=<a class="el" href="classcasacore_1_1FileLocker.html#a88e00f7a9d5ca67f0aa9c55d0da57601ac3d6c1b5bfa673e8b3ea66751a95922b">FileLocker::Write</a>)</td></tr>
<tr class="memdesc:a6bab2073fd8293e72b3b02d9c3af7c62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test if the file can be locked for read or write.  <a href="#a6bab2073fd8293e72b3b02d9c3af7c62">More...</a><br/></td></tr>
<tr class="separator:a6bab2073fd8293e72b3b02d9c3af7c62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a368aa35bb3ce8cb4de8965648c2efd51"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#a368aa35bb3ce8cb4de8965648c2efd51">hasLock</a> (<a class="el" href="classcasacore_1_1FileLocker.html#a88e00f7a9d5ca67f0aa9c55d0da57601">FileLocker::LockType</a>=<a class="el" href="classcasacore_1_1FileLocker.html#a88e00f7a9d5ca67f0aa9c55d0da57601ac3d6c1b5bfa673e8b3ea66751a95922b">FileLocker::Write</a>) const </td></tr>
<tr class="memdesc:a368aa35bb3ce8cb4de8965648c2efd51"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test if the process has a lock for read or write on the file.  <a href="#a368aa35bb3ce8cb4de8965648c2efd51">More...</a><br/></td></tr>
<tr class="separator:a368aa35bb3ce8cb4de8965648c2efd51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ea260570e6e5fd26812b3e0d34e5cdd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#a3ea260570e6e5fd26812b3e0d34e5cdd">lastError</a> () const </td></tr>
<tr class="memdesc:a3ea260570e6e5fd26812b3e0d34e5cdd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the last error.  <a href="#a3ea260570e6e5fd26812b3e0d34e5cdd">More...</a><br/></td></tr>
<tr class="separator:a3ea260570e6e5fd26812b3e0d34e5cdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e84ed2870f4034815a1c4afb7c99c6b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcasacore_1_1String.html">String</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#a3e84ed2870f4034815a1c4afb7c99c6b">lastMessage</a> () const </td></tr>
<tr class="memdesc:a3e84ed2870f4034815a1c4afb7c99c6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the message belonging to the last error.  <a href="#a3e84ed2870f4034815a1c4afb7c99c6b">More...</a><br/></td></tr>
<tr class="separator:a3e84ed2870f4034815a1c4afb7c99c6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a125f398eeecbf3319830ae26b1a1bb3f"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classcasacore_1_1String.html">String</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#a125f398eeecbf3319830ae26b1a1bb3f">name</a> () const </td></tr>
<tr class="memdesc:a125f398eeecbf3319830ae26b1a1bb3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the name of the lock file.  <a href="#a125f398eeecbf3319830ae26b1a1bb3f">More...</a><br/></td></tr>
<tr class="separator:a125f398eeecbf3319830ae26b1a1bb3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9aef633268532483a523077131407601"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classcasacore_1_1Block.html">Block</a>&lt; <a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#a9aef633268532483a523077131407601">reqIds</a> () const </td></tr>
<tr class="memdesc:a9aef633268532483a523077131407601"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the block of request id's.  <a href="#a9aef633268532483a523077131407601">More...</a><br/></td></tr>
<tr class="separator:a9aef633268532483a523077131407601"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb286e0b97ba8b1e2171d907a917cba0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#acb286e0b97ba8b1e2171d907a917cba0">getInfo</a> (<a class="el" href="classcasacore_1_1MemoryIO.html">MemoryIO</a> &amp;info)</td></tr>
<tr class="memdesc:acb286e0b97ba8b1e2171d907a917cba0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the request id's and the info from the lock file.  <a href="#acb286e0b97ba8b1e2171d907a917cba0">More...</a><br/></td></tr>
<tr class="separator:acb286e0b97ba8b1e2171d907a917cba0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a133703dbbb24034f7f78f24b8011e3a1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#a133703dbbb24034f7f78f24b8011e3a1">putInfo</a> (const <a class="el" href="classcasacore_1_1MemoryIO.html">MemoryIO</a> &amp;info) const </td></tr>
<tr class="memdesc:a133703dbbb24034f7f78f24b8011e3a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Put the info into the file (after the request id's).  <a href="#a133703dbbb24034f7f78f24b8011e3a1">More...</a><br/></td></tr>
<tr class="separator:a133703dbbb24034f7f78f24b8011e3a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ab8e02a29db31b598f9d4d8eeeaad5e0e"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#ab8e02a29db31b598f9d4d8eeeaad5e0e">showLock</a> (<a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a> &amp;pid, <a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a> &amp;permLocked, const <a class="el" href="classcasacore_1_1String.html">String</a> &amp;fileName)</td></tr>
<tr class="memdesc:ab8e02a29db31b598f9d4d8eeeaad5e0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tell if another process holds a read or write lock on the given file or has the file opened.  <a href="#ab8e02a29db31b598f9d4d8eeeaad5e0e">More...</a><br/></td></tr>
<tr class="separator:ab8e02a29db31b598f9d4d8eeeaad5e0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a0b859046797e13e88d566f74501f5b71"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#a0b859046797e13e88d566f74501f5b71">LockFile</a> (const <a class="el" href="classcasacore_1_1LockFile.html">LockFile</a> &amp;)</td></tr>
<tr class="memdesc:a0b859046797e13e88d566f74501f5b71"><td class="mdescLeft">&#160;</td><td class="mdescRight">The copy constructor cannot be used (its semantics are too difficult).  <a href="#a0b859046797e13e88d566f74501f5b71">More...</a><br/></td></tr>
<tr class="separator:a0b859046797e13e88d566f74501f5b71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad01cd4cdf1541da958e66d7053673f27"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcasacore_1_1LockFile.html">LockFile</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#ad01cd4cdf1541da958e66d7053673f27">operator=</a> (const <a class="el" href="classcasacore_1_1LockFile.html">LockFile</a> &amp;)</td></tr>
<tr class="memdesc:ad01cd4cdf1541da958e66d7053673f27"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assignment cannot be used (its semantics are too difficult).  <a href="#ad01cd4cdf1541da958e66d7053673f27">More...</a><br/></td></tr>
<tr class="separator:ad01cd4cdf1541da958e66d7053673f27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25c2e79d6099cb4d0960d081fdc3711e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#a25c2e79d6099cb4d0960d081fdc3711e">getInt</a> (const <a class="el" href="namespacecasacore.html#a016442aacbe9faceef443b62ab555eb9">uChar</a> *buffer, <a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a> leng, <a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a> offset) const </td></tr>
<tr class="memdesc:a25c2e79d6099cb4d0960d081fdc3711e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get an Int from the buffer at the given offset and convert it from canonical to local format.  <a href="#a25c2e79d6099cb4d0960d081fdc3711e">More...</a><br/></td></tr>
<tr class="separator:a25c2e79d6099cb4d0960d081fdc3711e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b16ac87751e67a1acef54d98a492026"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#a4b16ac87751e67a1acef54d98a492026">addReqId</a> ()</td></tr>
<tr class="memdesc:a4b16ac87751e67a1acef54d98a492026"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add the request id of this process to the list.  <a href="#a4b16ac87751e67a1acef54d98a492026">More...</a><br/></td></tr>
<tr class="separator:a4b16ac87751e67a1acef54d98a492026"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0fde53ec110cae141c4a0bc6c7e873e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#ae0fde53ec110cae141c4a0bc6c7e873e">removeReqId</a> ()</td></tr>
<tr class="memdesc:ae0fde53ec110cae141c4a0bc6c7e873e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove the request id of this process from the list (and all the ones before it).  <a href="#ae0fde53ec110cae141c4a0bc6c7e873e">More...</a><br/></td></tr>
<tr class="separator:ae0fde53ec110cae141c4a0bc6c7e873e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7c248493e22c09db924009a140a8e08"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#af7c248493e22c09db924009a140a8e08">getReqId</a> ()</td></tr>
<tr class="memdesc:af7c248493e22c09db924009a140a8e08"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the request list from the file.  <a href="#af7c248493e22c09db924009a140a8e08">More...</a><br/></td></tr>
<tr class="separator:af7c248493e22c09db924009a140a8e08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a397a1c3871ea51a31be56be4443d2ce0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#a397a1c3871ea51a31be56be4443d2ce0">putReqId</a> (int fd) const </td></tr>
<tr class="memdesc:a397a1c3871ea51a31be56be4443d2ce0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Put the request list into the file.  <a href="#a397a1c3871ea51a31be56be4443d2ce0">More...</a><br/></td></tr>
<tr class="separator:a397a1c3871ea51a31be56be4443d2ce0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a245769d262af47dc5c4743b640285447"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#a245769d262af47dc5c4743b640285447">convReqId</a> (const <a class="el" href="namespacecasacore.html#a016442aacbe9faceef443b62ab555eb9">uChar</a> *buffer, <a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a> leng)</td></tr>
<tr class="memdesc:a245769d262af47dc5c4743b640285447"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert the request id from canonical to local format.  <a href="#a245769d262af47dc5c4743b640285447">More...</a><br/></td></tr>
<tr class="separator:a245769d262af47dc5c4743b640285447"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14333403d75d7a96006a7370e1e9c87b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#a14333403d75d7a96006a7370e1e9c87b">getNrReqId</a> () const </td></tr>
<tr class="memdesc:a14333403d75d7a96006a7370e1e9c87b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the number of request id's.  <a href="#a14333403d75d7a96006a7370e1e9c87b">More...</a><br/></td></tr>
<tr class="separator:a14333403d75d7a96006a7370e1e9c87b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a1e45ff8e4ad235b8247e5483e8451de1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcasacore_1_1FileLocker.html">FileLocker</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#a1e45ff8e4ad235b8247e5483e8451de1">itsLocker</a></td></tr>
<tr class="separator:a1e45ff8e4ad235b8247e5483e8451de1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98aa7e1512d85f218b4a02ca6019578b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcasacore_1_1FileLocker.html">FileLocker</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#a98aa7e1512d85f218b4a02ca6019578b">itsUseLocker</a></td></tr>
<tr class="separator:a98aa7e1512d85f218b4a02ca6019578b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7410fd751023500c6dcf85d5f96d452"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcasacore_1_1FiledesIO.html">FiledesIO</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#ac7410fd751023500c6dcf85d5f96d452">itsFileIO</a></td></tr>
<tr class="separator:ac7410fd751023500c6dcf85d5f96d452"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3afed34797029caf380387481c6abcf0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcasacore_1_1CanonicalIO.html">CanonicalIO</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#a3afed34797029caf380387481c6abcf0">itsCanIO</a></td></tr>
<tr class="separator:a3afed34797029caf380387481c6abcf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cacef39c4267eed423b2d27274b90f6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#a9cacef39c4267eed423b2d27274b90f6">itsWritable</a></td></tr>
<tr class="separator:a9cacef39c4267eed423b2d27274b90f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5daca53749f697ce6abba34694cf67f2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#a5daca53749f697ce6abba34694cf67f2">itsAddToList</a></td></tr>
<tr class="separator:a5daca53749f697ce6abba34694cf67f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae98eb5e11458415b9e89553a2eec8898"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#ae98eb5e11458415b9e89553a2eec8898">itsInterval</a></td></tr>
<tr class="separator:ae98eb5e11458415b9e89553a2eec8898"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcd338f03563ee72c51111d6f73fec9e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcasacore_1_1Time.html">Time</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#abcd338f03563ee72c51111d6f73fec9e">itsLastTime</a></td></tr>
<tr class="separator:abcd338f03563ee72c51111d6f73fec9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81e3bd3c39690201be2c188f889404f2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcasacore_1_1String.html">String</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#a81e3bd3c39690201be2c188f889404f2">itsName</a></td></tr>
<tr class="separator:a81e3bd3c39690201be2c188f889404f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a942d8f1cdfe3e2a1111a55b41d0d3510"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#a942d8f1cdfe3e2a1111a55b41d0d3510">itsPid</a></td></tr>
<tr class="separator:a942d8f1cdfe3e2a1111a55b41d0d3510"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71611b85fa52b42db062b9f6c458cd47"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#a71611b85fa52b42db062b9f6c458cd47">itsHostId</a></td></tr>
<tr class="separator:a71611b85fa52b42db062b9f6c458cd47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2df21b352a3ee167a2c656859070ece7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcasacore_1_1Block.html">Block</a>&lt; <a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#a2df21b352a3ee167a2c656859070ece7">itsReqId</a></td></tr>
<tr class="separator:a2df21b352a3ee167a2c656859070ece7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa094e69a22ad06f138b99702d45ab997"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LockFile.html#aa094e69a22ad06f138b99702d45ab997">itsInspectCount</a></td></tr>
<tr class="separator:aa094e69a22ad06f138b99702d45ab997"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class to handle file locking and synchronization. </p>
<p><a class="anchor" id="LockFile_summary"></a> </p>
<h3>Intended use:</h3>
<p>Public interface</p>
<h3>Review Status</h3>
<dl>
<dt>Reviewed By:</dt>
<dd>UNKNOWN</dd>
<dt>Date Reviewed:</dt>
<dd>before2004/08/25</dd>
<dt>Test programs:</dt>
<dd>tLockFile</dd>
</dl>
<h3>Prerequisite</h3>
<ul>
<li>
class <a class="el" href="classcasacore_1_1FileLocker.html">FileLocker</a> </li>
<li>
class <a class="el" href="classcasacore_1_1MemoryIO.html">MemoryIO</a> </li>
</ul>
<h3>Synopsis</h3>
<p>This class handles file locking by means of a special lock file which serves as the locking mechanism for another file or group of files. It is for instance used to lock a table in the Casacore <a class="el" href="classcasacore_1_1Table.html" title="Main interface class to a read/write table. ">Table</a> System. </p>
<p>The lock file has in principle world read/write access, so every process accessing the main file can write information in it. The lock file contains the following information (in canonical format): </p>
<ul>
<li>
A request list indicating which processes want to acquire a lock. The process holding the lock can inspect this list to decide if it should release its lock. An interval can be defined to be sure that the list is not inspected too often. A user can choose not to add to this list, because it incurs some overhead to write the list. However, that should only be done when one is sure that another process cannot keep a lock forever. </li>
<li>
Some information telling if the state of the main file has changed. The information can be used by a process to synchronize its internal buffers with the new contents of the file(s). E.g. a table could store one or more counters in it, which can be used to determine if the table has to refresh its caches. This information is passed as a <a class="el" href="classcasacore_1_1MemoryIO.html" title="Class for IO to a memory buffer. ">MemoryIO</a> object and is opaque for the <code><a class="el" href="classcasacore_1_1LockFile.html" title="Class to handle file locking and synchronization. ">LockFile</a></code> class. It is simply handled as a stream of bytes. </li>
</ul>
<p>Acquiring a lock works as follows: </p>
<ul>
<li>
Class <a class="el" href="classcasacore_1_1FileLocker.html">FileLocker</a> is used to do one attempt to acquire a read or write lock. </li>
<li>
If it fails and multiple attempts have to be done, the request is added to the request list in the lock file to tell the process holding the lock that another process needs a lock. </li>
<li>
Other attempts (with 1 second intervals) will be done until the lock is acquired or until the maximum number of attempts is reached. </li>
<li>
The lock request is removed from the request list. </li>
<li>
When the lock was acquired, the synchronization info is read from the lock file. </li>
</ul>
<p>Releasing a lock writes the synchronization info into the lock file and tells <code><a class="el" href="classcasacore_1_1FileLocker.html" title="Class to handle file locking. ">FileLocker</a></code> to release the lock. </p>
<p>When the lock file cannot be opened as read/write, it is opened as readonly. It means that the request list cannot be stored in it, so the process has no way to tell the other processes it wants access to the file. It has to wait until the lock is released. <br/>
 In principle a lock file should always be there. However, it is possible (with a constructor option) that there is no lock file. In that case each lock request succeeds without doing actual locking. This mode is needed to be able to handle readonly tables containing no lock file. </p>
<p>After each write the <code>fsync</code> function is called to make sure that the contents of the file are written to disk. This is necessary for correct file synchronization in NFS. However, at the moment this feature is switched off, because it degraded performance severely. </p>
<p>Apart from the read/write lock handling, the <code><a class="el" href="classcasacore_1_1LockFile.html" title="Class to handle file locking and synchronization. ">LockFile</a></code> also contains a mechanism to detect if a file is opened by another process. This can be used to test if a process can safely delete the file. For this purpose it sets another read lock when the file gets opened. The function <code>isMultiUsed</code> tests this lock to see if the file is used in other processes. <br/>
 This lock is also used to tell if the file is permanently locked. If that is the case, the locked block is 2 bytes instead of 1. </p>
<p>When in the same process multiple <a class="el" href="classcasacore_1_1LockFile.html" title="Class to handle file locking and synchronization. ">LockFile</a> objects are created for the same file, deleting one object releases all locks on the file, thus also the locks held by the other <a class="el" href="classcasacore_1_1LockFile.html" title="Class to handle file locking and synchronization. ">LockFile</a> objects. This behaviour is due to the way file locking is working on UNIX machines (certainly on Solaris 2.6). One can use the test program tLockFile to test for this behaviour.</p>
<h3>Example</h3>
<p><a class="anchor" id="LockFile_example1"></a></p>
<div class="fragment"><div class="line"> <span class="comment">// Create/open the lock file (with 1 sec inspection interval).</span></div>
<div class="line"> <span class="comment">// Acquire the lock and get the synchronization info.</span></div>
<div class="line"> <a class="code" href="classcasacore_1_1LockFile.html#ac63535ebfa8f7c031ff78a90e4afc9fb">LockFile</a> lock (<span class="stringliteral">&quot;file.name&quot;</span>, 1);</div>
<div class="line"> MemoryIO syncInfo;</div>
<div class="line"> <span class="keywordflow">if</span> (! lock.acquire (syncInfo)) {</div>
<div class="line"> <span class="keywordflow">throw</span> (AipsError (<span class="stringliteral">&quot;Locking failed: &quot;</span> + lock.message()));</div>
<div class="line"> }</div>
<div class="line"> <span class="keywordflow">while</span> (...) {</div>
<div class="line">... <span class="keywordflow">do</span> something with the table files..\.</div>
<div class="line"> <span class="comment">// Test if another process needs the files.</span></div>
<div class="line"> <span class="comment">// If so, synchronize files and release lock.</span></div>
<div class="line"> <span class="keywordflow">if</span> (lock.inspect()) {</div>
<div class="line"> <span class="keywordflow">do</span> fsync <span class="keywordflow">for</span> <a class="code" href="namespacecasacore.html#adcc31f2f81c9ed818a3a8a170f9d8742">all</a> other files</div>
<div class="line"> syncInfo.seek (0);</div>
<div class="line"> syncInfo.write (...);</div>
<div class="line"> lock.release (syncInfo);</div>
<div class="line"> <span class="comment">// At this point another process can grab the lock.</span></div>
<div class="line"> <span class="comment">// Reacquire the lock</span></div>
<div class="line"> lock.acquire (syncInfo);</div>
<div class="line"> <span class="keywordflow">throw</span> (AipsError (<span class="stringliteral">&quot;Locking failed: &quot;</span> + lock.message()));</div>
<div class="line"> }</div>
<div class="line"> }</div>
<div class="line"> }</div>
</div><!-- fragment --><h3>Motivation</h3>
<p>Make it possible to lock and synchronize tables in an easy and efficient way. </p>

<p>Definition at line <a class="el" href="LockFile_8h_source.html#l00171">171</a> of file <a class="el" href="LockFile_8h_source.html">LockFile.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ac63535ebfa8f7c031ff78a90e4afc9fb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">casacore::LockFile::LockFile </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcasacore_1_1String.html">String</a> &amp;&#160;</td>
          <td class="paramname"><em>fileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>inspectInterval</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a>&#160;</td>
          <td class="paramname"><em>create</em> = <code><a class="el" href="namespacecasacore.html#a11ef6530f2dc946f54d220fe416bfd41">False</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a>&#160;</td>
          <td class="paramname"><em>addToRequestList</em> = <code><a class="el" href="namespacecasacore.html#ad5c850f9e177173e0f7d0ad57091501d">True</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a>&#160;</td>
          <td class="paramname"><em>mustExist</em> = <code><a class="el" href="namespacecasacore.html#ad5c850f9e177173e0f7d0ad57091501d">True</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a>&#160;</td>
          <td class="paramname"><em>seqnr</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a>&#160;</td>
          <td class="paramname"><em>permLocking</em> = <code><a class="el" href="namespacecasacore.html#a11ef6530f2dc946f54d220fe416bfd41">False</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a>&#160;</td>
          <td class="paramname"><em>noLocking</em> = <code><a class="el" href="namespacecasacore.html#a11ef6530f2dc946f54d220fe416bfd41">False</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create or open the lock file with the given name. </p>
<p>It is created if create=True or if the file does not exist yet. The interval (in seconds) defines how often function <code>inspect</code> inspects the request list in the lock file. An interval&gt;0 means that it is only inspected if the last inspect was at least <code>inspectInterval</code> seconds ago. An interval&lt;=0 means that <code>inspect</code> always inspects the request list. <br/>
When addToRequestList=False, function <code>acquire</code> does not add the request to the lock file when a lock cannot be acquired. This may result in better performance, but should be used with care. <br/>
 If <code>create==True</code>, a new lock file will always be created. Otherwise it will be created if it does not exist yet. <br/>
 If <code>mustExist==False</code>, it is allowed that the <a class="el" href="classcasacore_1_1LockFile.html" title="Class to handle file locking and synchronization. ">LockFile</a> does not exist and cannot be created either. <br/>
 The seqnr is used to set the offset where <a class="el" href="classcasacore_1_1LockFile.html" title="Class to handle file locking and synchronization. ">LockFile</a> will use 2 bytes to set the locks on. Only in special cases it should be other than 0. At the moment the offset is 2*seqnr. <br/>
 The <code>permLocking</code> argument is used to indicate if permanent locking will be used. If so, it'll indicate so. In that way <a class="el" href="classcasacore_1_1LockFile.html#ab8e02a29db31b598f9d4d8eeeaad5e0e" title="Tell if another process holds a read or write lock on the given file or has the file opened...">showLock()</a> can find out if if table is permanently locked. <br/>
 The <code>noLocking</code> argument is used to indicate that no locking is needed. It means that acquiring a lock always succeeds. </p>

</div>
</div>
<a class="anchor" id="a9b7cc28e0dcf5fa6997516e1a830dd35"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">casacore::LockFile::~LockFile </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The destructor does not delete the file, because it is not known when the last process using the lock file will stop. </p>
<p>For the table system this is no problem, because the lock file is contained in the directory of the table, thus deleted when the table gets deleted. </p>

</div>
</div>
<a class="anchor" id="a0b859046797e13e88d566f74501f5b71"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">casacore::LockFile::LockFile </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcasacore_1_1LockFile.html">LockFile</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The copy constructor cannot be used (its semantics are too difficult). </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ae701eaa69deba9293db0a5b223a1cedb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a> casacore::LockFile::acquire </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcasacore_1_1FileLocker.html#a88e00f7a9d5ca67f0aa9c55d0da57601">FileLocker::LockType</a>&#160;</td>
          <td class="paramname"><em>type</em> = <code><a class="el" href="classcasacore_1_1FileLocker.html#a88e00f7a9d5ca67f0aa9c55d0da57601ac3d6c1b5bfa673e8b3ea66751a95922b">FileLocker::Write</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a>&#160;</td>
          <td class="paramname"><em>nattempts</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Acquire a read or write lock. </p>
<p>It reads the information (if the <code>info</code> argument is given) from the lock file. The user is responsible for interpreting the information (e.g. converting from canonical to local format). The seek pointer in the <code><a class="el" href="classcasacore_1_1MemoryIO.html" title="Class for IO to a memory buffer. ">MemoryIO</a></code> object is set to 0, so the user can simply start reading the pointer. <br/>
The argument <code>nattempts</code> tells how often it is attempted (with 1 second intervals) to acquire the lock if it does not succeed. 0 means forever, while 1 means do not retry. </p>

<p>Definition at line <a class="el" href="LockFile_8h_source.html#l00339">339</a> of file <a class="el" href="LockFile_8h_source.html">LockFile.h</a>.</p>

<p>Referenced by <a class="el" href="LockFile_8h_source.html#l00343">acquire()</a>.</p>

</div>
</div>
<a class="anchor" id="a737fc9f3cf91347e8bf285eeaf60ad84"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a> casacore::LockFile::acquire </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcasacore_1_1MemoryIO.html">MemoryIO</a> &amp;&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcasacore_1_1FileLocker.html#a88e00f7a9d5ca67f0aa9c55d0da57601">FileLocker::LockType</a>&#160;</td>
          <td class="paramname"><em>type</em> = <code><a class="el" href="classcasacore_1_1FileLocker.html#a88e00f7a9d5ca67f0aa9c55d0da57601ac3d6c1b5bfa673e8b3ea66751a95922b">FileLocker::Write</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a>&#160;</td>
          <td class="paramname"><em>nattempts</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="LockFile_8h_source.html#l00343">343</a> of file <a class="el" href="LockFile_8h_source.html">LockFile.h</a>.</p>

<p>References <a class="el" href="LockFile_8h_source.html#l00339">acquire()</a>.</p>

</div>
</div>
<a class="anchor" id="acbf0df08cb056fcc3a3828c54bf94d8e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a> casacore::LockFile::acquire </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcasacore_1_1MemoryIO.html">MemoryIO</a> *&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcasacore_1_1FileLocker.html#a88e00f7a9d5ca67f0aa9c55d0da57601">FileLocker::LockType</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a>&#160;</td>
          <td class="paramname"><em>nattempts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a4b16ac87751e67a1acef54d98a492026"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void casacore::LockFile::addReqId </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add the request id of this process to the list. </p>

</div>
</div>
<a class="anchor" id="a6bab2073fd8293e72b3b02d9c3af7c62"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a> casacore::LockFile::canLock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcasacore_1_1FileLocker.html#a88e00f7a9d5ca67f0aa9c55d0da57601">FileLocker::LockType</a>&#160;</td>
          <td class="paramname"><em>type</em> = <code><a class="el" href="classcasacore_1_1FileLocker.html#a88e00f7a9d5ca67f0aa9c55d0da57601ac3d6c1b5bfa673e8b3ea66751a95922b">FileLocker::Write</a></code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Test if the file can be locked for read or write. </p>

<p>Definition at line <a class="el" href="LockFile_8h_source.html#l00356">356</a> of file <a class="el" href="LockFile_8h_source.html">LockFile.h</a>.</p>

<p>References <a class="el" href="classcasacore_1_1FileLocker.html#a3994754b0f151a0b68b78b4db57ee755">casacore::FileLocker::canLock()</a>, <a class="el" href="LockFile_8h_source.html#l00321">itsFileIO</a>, <a class="el" href="LockFile_8h_source.html#l00319">itsLocker</a>, and <a class="el" href="aipstype_8h_source.html#l00043">casacore::True</a>.</p>

</div>
</div>
<a class="anchor" id="a245769d262af47dc5c4743b640285447"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void casacore::LockFile::convReqId </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacecasacore.html#a016442aacbe9faceef443b62ab555eb9">uChar</a> *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a>&#160;</td>
          <td class="paramname"><em>leng</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert the request id from canonical to local format. </p>

</div>
</div>
<a class="anchor" id="acb286e0b97ba8b1e2171d907a917cba0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void casacore::LockFile::getInfo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcasacore_1_1MemoryIO.html">MemoryIO</a> &amp;&#160;</td>
          <td class="paramname"><em>info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the request id's and the info from the lock file. </p>

<p>Referenced by <a class="el" href="TableLockData_8h_source.html#l00150">casacore::TableLockData::getInfo()</a>.</p>

</div>
</div>
<a class="anchor" id="a25c2e79d6099cb4d0960d081fdc3711e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a> casacore::LockFile::getInt </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacecasacore.html#a016442aacbe9faceef443b62ab555eb9">uChar</a> *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a>&#160;</td>
          <td class="paramname"><em>leng</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a>&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get an Int from the buffer at the given offset and convert it from canonical to local format. </p>
<p>If the buffer is too short (i.e. does not contain the value), a zero value is returned. </p>

</div>
</div>
<a class="anchor" id="a14333403d75d7a96006a7370e1e9c87b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a> casacore::LockFile::getNrReqId </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the number of request id's. </p>

</div>
</div>
<a class="anchor" id="af7c248493e22c09db924009a140a8e08"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void casacore::LockFile::getReqId </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the request list from the file. </p>

</div>
</div>
<a class="anchor" id="a368aa35bb3ce8cb4de8965648c2efd51"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a> casacore::LockFile::hasLock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcasacore_1_1FileLocker.html#a88e00f7a9d5ca67f0aa9c55d0da57601">FileLocker::LockType</a>&#160;</td>
          <td class="paramname"><em>type</em> = <code><a class="el" href="classcasacore_1_1FileLocker.html#a88e00f7a9d5ca67f0aa9c55d0da57601ac3d6c1b5bfa673e8b3ea66751a95922b">FileLocker::Write</a></code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Test if the process has a lock for read or write on the file. </p>

<p>Definition at line <a class="el" href="LockFile_8h_source.html#l00360">360</a> of file <a class="el" href="LockFile_8h_source.html">LockFile.h</a>.</p>

<p>References <a class="el" href="FileLocker_8h_source.html#l00154">casacore::FileLocker::hasLock()</a>, <a class="el" href="LockFile_8h_source.html#l00321">itsFileIO</a>, <a class="el" href="LockFile_8h_source.html#l00319">itsLocker</a>, and <a class="el" href="aipstype_8h_source.html#l00043">casacore::True</a>.</p>

<p>Referenced by <a class="el" href="TableLockData_8h_source.html#l00134">casacore::TableLockData::hasLock()</a>.</p>

</div>
</div>
<a class="anchor" id="a6d807b35d0f1e43f6f085753bb59a56a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a> casacore::LockFile::inspect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a>&#160;</td>
          <td class="paramname"><em>always</em> = <code><a class="el" href="namespacecasacore.html#a11ef6530f2dc946f54d220fe416bfd41">False</a></code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Inspect if another process wants to access the file (i.e. </p>
<p>if the request list is not empty). It only inspects if the time passed since the last inspection exceeds the inspection interval as given in the constructor. If the time passed is too short, False is returned (indicating that no access is needed). If <code>always==True</code>, no test on inspection interval is done, so the inspect is always done. </p>

<p>Referenced by <a class="el" href="TableLockData_8h_source.html#l00138">casacore::TableLockData::autoRelease()</a>.</p>

</div>
</div>
<a class="anchor" id="a225490ec6805037883a32f9c9b59feda"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a> casacore::LockFile::isMultiUsed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Is the file associated with the <a class="el" href="classcasacore_1_1LockFile.html" title="Class to handle file locking and synchronization. ">LockFile</a> object in use in another process? </p>

<p>Referenced by <a class="el" href="TableLockData_8h_source.html#l00144">casacore::TableLockData::isMultiUsed()</a>.</p>

</div>
</div>
<a class="anchor" id="a3ea260570e6e5fd26812b3e0d34e5cdd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int casacore::LockFile::lastError </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the last error. </p>

<p>Definition at line <a class="el" href="LockFile_8h_source.html#l00364">364</a> of file <a class="el" href="LockFile_8h_source.html">LockFile.h</a>.</p>

<p>References <a class="el" href="LockFile_8h_source.html#l00319">itsLocker</a>, and <a class="el" href="FileLocker_8h_source.html#l00162">casacore::FileLocker::lastError()</a>.</p>

</div>
</div>
<a class="anchor" id="a3e84ed2870f4034815a1c4afb7c99c6b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcasacore_1_1String.html">String</a> casacore::LockFile::lastMessage </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the message belonging to the last error. </p>

<p>Definition at line <a class="el" href="LockFile_8h_source.html#l00368">368</a> of file <a class="el" href="LockFile_8h_source.html">LockFile.h</a>.</p>

<p>References <a class="el" href="LockFile_8h_source.html#l00319">itsLocker</a>, and <a class="el" href="classcasacore_1_1FileLocker.html#a60316770a5b29a5f625d5135c6f383e5">casacore::FileLocker::lastMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="a125f398eeecbf3319830ae26b1a1bb3f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classcasacore_1_1String.html">String</a> &amp; casacore::LockFile::name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the name of the lock file. </p>

<p>Definition at line <a class="el" href="LockFile_8h_source.html#l00372">372</a> of file <a class="el" href="LockFile_8h_source.html">LockFile.h</a>.</p>

<p>References <a class="el" href="LockFile_8h_source.html#l00327">itsName</a>.</p>

</div>
</div>
<a class="anchor" id="ad01cd4cdf1541da958e66d7053673f27"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcasacore_1_1LockFile.html">LockFile</a>&amp; casacore::LockFile::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcasacore_1_1LockFile.html">LockFile</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Assignment cannot be used (its semantics are too difficult). </p>

</div>
</div>
<a class="anchor" id="a133703dbbb24034f7f78f24b8011e3a1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void casacore::LockFile::putInfo </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcasacore_1_1MemoryIO.html">MemoryIO</a> &amp;&#160;</td>
          <td class="paramname"><em>info</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Put the info into the file (after the request id's). </p>

<p>Referenced by <a class="el" href="TableLockData_8h_source.html#l00154">casacore::TableLockData::putInfo()</a>.</p>

</div>
</div>
<a class="anchor" id="a397a1c3871ea51a31be56be4443d2ce0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void casacore::LockFile::putReqId </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Put the request list into the file. </p>

</div>
</div>
<a class="anchor" id="a5b4fc54de384f42bc897fb71e2572ada"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a> casacore::LockFile::release </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Release a lock and write the information (if given) into the lock file. </p>
<p>The user is responsible for making the information machine-independent (e.g. converting from local to canonical format). </p>

<p>Definition at line <a class="el" href="LockFile_8h_source.html#l00348">348</a> of file <a class="el" href="LockFile_8h_source.html">LockFile.h</a>.</p>

<p>Referenced by <a class="el" href="LockFile_8h_source.html#l00352">release()</a>.</p>

</div>
</div>
<a class="anchor" id="a7f716b20c413b34d101c861a5072e8de"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a> casacore::LockFile::release </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcasacore_1_1MemoryIO.html">MemoryIO</a> &amp;&#160;</td>
          <td class="paramname"><em>info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="LockFile_8h_source.html#l00352">352</a> of file <a class="el" href="LockFile_8h_source.html">LockFile.h</a>.</p>

<p>References <a class="el" href="LockFile_8h_source.html#l00348">release()</a>.</p>

</div>
</div>
<a class="anchor" id="aedd581c76e683a3684eadeb0022a0395"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a> casacore::LockFile::release </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcasacore_1_1MemoryIO.html">MemoryIO</a> *&#160;</td>
          <td class="paramname"><em>info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ae0fde53ec110cae141c4a0bc6c7e873e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void casacore::LockFile::removeReqId </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remove the request id of this process from the list (and all the ones before it). </p>

</div>
</div>
<a class="anchor" id="a9aef633268532483a523077131407601"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classcasacore_1_1Block.html">Block</a>&lt; <a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a> &gt; &amp; casacore::LockFile::reqIds </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the block of request id's. </p>

<p>Definition at line <a class="el" href="LockFile_8h_source.html#l00376">376</a> of file <a class="el" href="LockFile_8h_source.html">LockFile.h</a>.</p>

<p>References <a class="el" href="LockFile_8h_source.html#l00330">itsReqId</a>.</p>

</div>
</div>
<a class="anchor" id="ab8e02a29db31b598f9d4d8eeeaad5e0e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a> casacore::LockFile::showLock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a> &amp;&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a> &amp;&#160;</td>
          <td class="paramname"><em>permLocked</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classcasacore_1_1String.html">String</a> &amp;&#160;</td>
          <td class="paramname"><em>fileName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Tell if another process holds a read or write lock on the given file or has the file opened. </p>
<p>It returns: <br/>
 3 if write-locked elsewhere. <br/>
 2 if read-locked elsewhere. <br/>
 1 if opened elsewhere. <br/>
 0 if locked nor opened. <br/>
It fills in the PID of the process having the file locked or opened. <br/>
If locked, it also tells if it is permanently locked. <br/>
An exception is thrown if the file does not exist or cannot be opened. </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a5daca53749f697ce6abba34694cf67f2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a> casacore::LockFile::itsAddToList</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="LockFile_8h_source.html#l00324">324</a> of file <a class="el" href="LockFile_8h_source.html">LockFile.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3afed34797029caf380387481c6abcf0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcasacore_1_1CanonicalIO.html">CanonicalIO</a>* casacore::LockFile::itsCanIO</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="LockFile_8h_source.html#l00322">322</a> of file <a class="el" href="LockFile_8h_source.html">LockFile.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac7410fd751023500c6dcf85d5f96d452"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcasacore_1_1FiledesIO.html">FiledesIO</a>* casacore::LockFile::itsFileIO</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="LockFile_8h_source.html#l00321">321</a> of file <a class="el" href="LockFile_8h_source.html">LockFile.h</a>.</p>

<p>Referenced by <a class="el" href="LockFile_8h_source.html#l00356">canLock()</a>, and <a class="el" href="LockFile_8h_source.html#l00360">hasLock()</a>.</p>

</div>
</div>
<a class="anchor" id="a71611b85fa52b42db062b9f6c458cd47"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a> casacore::LockFile::itsHostId</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="LockFile_8h_source.html#l00329">329</a> of file <a class="el" href="LockFile_8h_source.html">LockFile.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa094e69a22ad06f138b99702d45ab997"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a> casacore::LockFile::itsInspectCount</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="LockFile_8h_source.html#l00333">333</a> of file <a class="el" href="LockFile_8h_source.html">LockFile.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae98eb5e11458415b9e89553a2eec8898"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double casacore::LockFile::itsInterval</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="LockFile_8h_source.html#l00325">325</a> of file <a class="el" href="LockFile_8h_source.html">LockFile.h</a>.</p>

</div>
</div>
<a class="anchor" id="abcd338f03563ee72c51111d6f73fec9e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcasacore_1_1Time.html">Time</a> casacore::LockFile::itsLastTime</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="LockFile_8h_source.html#l00326">326</a> of file <a class="el" href="LockFile_8h_source.html">LockFile.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1e45ff8e4ad235b8247e5483e8451de1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcasacore_1_1FileLocker.html">FileLocker</a> casacore::LockFile::itsLocker</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="LockFile_8h_source.html#l00319">319</a> of file <a class="el" href="LockFile_8h_source.html">LockFile.h</a>.</p>

<p>Referenced by <a class="el" href="LockFile_8h_source.html#l00356">canLock()</a>, <a class="el" href="LockFile_8h_source.html#l00360">hasLock()</a>, <a class="el" href="LockFile_8h_source.html#l00364">lastError()</a>, and <a class="el" href="LockFile_8h_source.html#l00368">lastMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="a81e3bd3c39690201be2c188f889404f2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcasacore_1_1String.html">String</a> casacore::LockFile::itsName</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="LockFile_8h_source.html#l00327">327</a> of file <a class="el" href="LockFile_8h_source.html">LockFile.h</a>.</p>

<p>Referenced by <a class="el" href="LockFile_8h_source.html#l00372">name()</a>.</p>

</div>
</div>
<a class="anchor" id="a942d8f1cdfe3e2a1111a55b41d0d3510"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a> casacore::LockFile::itsPid</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="LockFile_8h_source.html#l00328">328</a> of file <a class="el" href="LockFile_8h_source.html">LockFile.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2df21b352a3ee167a2c656859070ece7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcasacore_1_1Block.html">Block</a>&lt;<a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a>&gt; casacore::LockFile::itsReqId</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="LockFile_8h_source.html#l00330">330</a> of file <a class="el" href="LockFile_8h_source.html">LockFile.h</a>.</p>

<p>Referenced by <a class="el" href="LockFile_8h_source.html#l00376">reqIds()</a>.</p>

</div>
</div>
<a class="anchor" id="a98aa7e1512d85f218b4a02ca6019578b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcasacore_1_1FileLocker.html">FileLocker</a> casacore::LockFile::itsUseLocker</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="LockFile_8h_source.html#l00320">320</a> of file <a class="el" href="LockFile_8h_source.html">LockFile.h</a>.</p>

</div>
</div>
<a class="anchor" id="a9cacef39c4267eed423b2d27274b90f6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a> casacore::LockFile::itsWritable</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="LockFile_8h_source.html#l00323">323</a> of file <a class="el" href="LockFile_8h_source.html">LockFile.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>casa/IO/<a class="el" href="LockFile_8h_source.html">LockFile.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
